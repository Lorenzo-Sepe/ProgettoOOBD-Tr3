IdentificatoreTipoNumero/*CREAZIONE DATABASE

create database Progetto3;

DEFINIZIONE TABELLE*/

CREATE TABLE CONTATTO
(
	ContattoID SERIAL PRIMARY KEY,
	PrefissoNome VARCHAR(25),
	Nome VARCHAR(25) NOT NULL,
	Cognome VARCHAR(25),
	PathFoto VARCHAR(80) NOT NULL,
	Visibilità BOOLEAN NOT NULL
);


CREATE TABLE GRUPPI
(
	Nome VARCHAR(30) NOT NULL
);

create table CASSAFORTE
(
	Nome VARCHAR(30) NOT NULL,
	Password VARCHAR(30) NOT NULL
);


CREATE TABLE MAIL
(
	NomeMail VARCHAR(25) PRIMARY KEY,
	ContattoAssociato INT NOT NULL,
	CONSTRAINT fk_Mail FOREIGN KEY(ContattoAssociato) REFERENCES CONTATTO(ContattoID)
   		ON DELETE CASCADE ON UPDATE Cascade
);


CREATE TABLE ACCOUNT
(
	ContattoAssociato INT NOT NULL,
	Fornitore VARCHAR(25) NOT NULL,
	Nickname VARCHAR(25) NOT NULL,
	Mail VARCHAR(25) NOT NULL,
	FraseDiBenvenuto VARCHAR(280),
	CONSTRAINT fk_ACCOUNT_Contatto FOREIGN KEY(ContattoAssociato) REFERENCES CONTATTO(ContattoID)
   		ON DELETE CASCADE	ON UPDATE Cascade,
	CONSTRAINT fk_ACCOUNT_Mail FOREIGN KEY(Mail) REFERENCES MAIL(NomeMail)
   		ON DELETE CASCADE ON UPDATE Cascade
);


CREATE TABLE NUMERI_TELEFONICI
(
	ContattoAssociato INT NOT NULL,
	PrefissoNazionale VARCHAR(5) NOT NULL,
	Numero VARCHAR(15) NOT NULL,
	TipoNumero NumeroTYPE Not Null,
	Identificatore VARCHAR(15) NOT NULL,
	CONSTRAINT fk_NUMERO FOREIGN KEY(ContattoAssociato) REFERENCES CONTATTO(ContattoID)
   		ON DELETE CASCADE ON UPDATE Cascade
);


CREATE TABLE INDIRIZZI
(
	ContattoAssociato INT NOT NULL,
	IndirizziID SERIAL NOT NULL,
	VIA VARCHAR(30) NOT NULL,
	CITTÀ VARCHAR(30) NOT NULL,
	CODICEPOSTALE VARCHAR(10) NOT NULL,
	NAZIONE VARCHAR(30) NOT NULL,
	CONSTRAINT fk_INDIRIZZI FOREIGN KEY(ContattoAssociato) REFERENCES CONTATTO(ContattoID)
   		ON DELETE CASCADE ON UPDATE Cascade
);


create table ABITA(
	IndirizzoID INT NOT NULL,
	ContattoID INT NOT NULL,
	AbitazionePrincipale BOOL NOT NULL,
	Identificatore VARCHAR(30) NOT NULL,
	CONSTRAINT fk_CONTATTO_ABITA FOREIGN KEY(ContattoID) REFERENCES CONTATTO(ContattoID)
   		ON DELETE CASCADE ON UPDATE Cascade,
	CONSTRAINT fk_INDIRIZZO_ABITA FOREIGN KEY(IndirizzoID) REFERENCES INDIRIZZI(IndirizziID)
	   ON DELETE CASCADE ON UPDATE Cascade
);

create table APPARTENENZA(
	GruppoNome VARCHAR(30) NOT NULL,
	ContattoID INT NOT NULL,
	CONSTRAINT fk_APPARTENENZA_CONTATTO FOREIGN KEY(ContattoID) REFERENCES CONTATTO(ContattoID)
   		ON DELETE CASCADE ON UPDATE CASCADE,
	CONSTRAINT fk_APPARTENENZA_GRUPPO FOREIGN KEY(GruppoNome) REFERENCES GRUPPI(NOME)
   		ON DELETE CASCADE ON UPDATE CASCADE
);

create table INCLUSIONE(
	CassaforteNome VARCHAR(30) NOT NULL,
	ContattoID INT NOT NULL,
	CONSTRAINT fk_INCLUSIONE_CASSAFORTE FOREIGN KEY(CassaforteNome) REFERENCES CASSAFORTE(NOME)
   		ON DELETE CASCADE ON UPDATE CASCADE,
	CONSTRAINT FK_INCLUSIONE_CONTATTO FOREIGN KEY(ContattoID) REFERENCES CONTATTO(ContattoID)
		ON DELETE CASCADE ON UPDATE CASCADE
);
